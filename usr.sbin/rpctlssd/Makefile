# $FreeBSD$

.include <src.opts.mk>

PROG=	rpctlssd
MAN=	rpctlssd.8
SRCS=	rpctlssd.c rpctlssd.h rpctlssd_svc.c rpctlssd_xdr.c

CFLAGS+= -I.
WARNS?= 1

LIBADD=	ssl crypto

CLEANFILES= rpctlssd_svc.c rpctlssd_xdr.c rpctlssd.h

RPCSRC=	${SRCTOP}/sys/rpc/rpcsec_tls/rpctlssd.x
RPCGEN= RPCGEN_CPP=${CPP:Q} rpcgen -L -C -M

rpctlssd_svc.c: ${RPCSRC} rpctlssd.h
	${RPCGEN} -m -o ${.TARGET} ${RPCSRC}

rpctlssd_xdr.c: ${RPCSRC} rpctlssd.h
	${RPCGEN} -c -o ${.TARGET} ${RPCSRC}

rpctlssd.h: ${RPCSRC}
	${RPCGEN} -h -o ${.TARGET} ${RPCSRC}

.PATH:	${SRCTOP}/sys/rpc/rpcsec_tls

.include <bsd.prog.mk>
